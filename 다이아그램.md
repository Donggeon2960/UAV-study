graph TD
    %% 스타일 정의
    classDef inputNode fill:#e3f2fd,stroke:#1565c0,stroke-width:2px,color:#0d47a1;
    classDef processNode fill:#fff9c4,stroke:#fbc02d,stroke-width:2px,rx:10,ry:10,color:#333;
    classDef outputNode fill:#e8f5e9,stroke:#2e7d32,stroke-width:2px,color:#1b5e20;
    classDef labelStyle fill:#ffffff,stroke:none,color:#666;

    %% 노드 정의
    subgraph Inputs [INPUT: Multi-rate Sensors]
        direction TB
        I1["<div style='text-align:left; line-height:1.5;'><strong>IMU (1000 Hz)</strong><br/>• 자이로스코프<br/>• 가속도계</div>"]:::inputNode
        I2["<div style='text-align:left; line-height:1.5;'><strong>보정 센서군</strong><br/>• 지자기 (100 Hz)<br/>• 기압계 (50 Hz)<br/>• GPS (10 Hz)<br/>• 광류 (10 Hz, 선택)</div>"]:::inputNode
    end

    Process("<strong>EKF Sensor Fusion</strong><br/>(확장 칼만 필터)"):::processNode

    Output["<div style='text-align:left; line-height:1.6;'><strong>OUTPUT: State Vector</strong><hr/>• <strong>위치:</strong> [3.21, 1.45, -5.03] m<br/>• <strong>속도:</strong> [0.85, 0.02, 0.00] m/s<br/>• <strong>자세:</strong> [2.1°, -1.3°, 45.2°]<br/>• <strong>각속도:</strong> [5, -2, 10] deg/s<br/><br/><span style='font-size:0.9em; color:#555;'>[신뢰도] 위치 ±0.5m / 자세 ±1°</span></div>"]:::outputNode

    %% 연결선 및 설명
    I1 -->|Prediction (예측)| Process
    I2 -->|Correction (보정)| Process
    Process ==>|Updated State (추정값)| Output

    %% 주석 (선택적)
    linkStyle 0 stroke:#1565c0,stroke-width:2px;
    linkStyle 1 stroke:#1565c0,stroke-width:2px,stroke-dasharray: 5 5;
    linkStyle 2 stroke:#2e7d32,stroke-width:3px;
